<div class="main">
  <div class="zarzadzanie">
    <div class="pizza_do_ulozenia">
      <div class="kontener_pizzy">
        <img src="images/pizza_gotowe/ser%20grube.png" class="main_img">

        @for (skladnik of wygenerowane_skladniki; track $index) {
          <img
            [src]="skladnik.url"
            class="skladnik_animowany"
            [style.left.%]="skladnik.x_procent"
            [style.top.%]="skladnik.y_procent"
            [style.z-index]="skladnik.z_indeks"
            [style.--start-z.px]="skladnik.z_start"
            [style.--rotacja.deg]="skladnik.rotacja">
        }
      </div>
    </div>
    <div class="skladniki">
      <div class="wyszukiwarka">
        <search tuiSearch>
          <form [formGroup]="form">
            <fieldset formArrayName="filters">
              <tui-search-filters>
                <ng-container>
                  <tui-textfield *tuiItem>
                    <label tuiLabel>Wyszukaj skladnik:</label>
                    <input
                      placeholder="kukurydza"
                      tuiTextfield
                      [formControlName]="0"
                    />
                  </tui-textfield>
                </ng-container>
              </tui-search-filters>
            </fieldset>
          </form>
        </search>
      </div>
      <div class="pole_wyboru">
        <div class="boczny lewy" (click)="przesun_lewo()">
          <div class="nakladka">
            <span class="material-symbols-outlined">chevron_left</span>
          </div>
          <img [src]="lewy_obrazek">
        </div>
        <div class="srodek" (click)="dodaie_skladnika(aktualnie_wybrany)">
          <img [src]="srodkowy_obrazek">
        </div>
        <div class="boczny prawy" (click)="przesun_prawo()">
          <div class="nakladka">
            <span class="material-symbols-outlined">chevron_right</span>
          </div>
          <img [src]="prawy_obrazek">
        </div>
      </div>
      <button tuiButton class="przycisk_zatwierdzenia" (click)="zamow_kompozycje()">Zam√≥w</button>
    </div>
  </div>
  <div class="lista">
    <table
      tuiTable
    >
      <thead>
      <tr>
        <th tuiTh>obrazek</th>
        <th tuiTh>nazwa</th>
        <th tuiTh>ilosc</th>
      </tr>
      </thead>
      <tbody tuiTbody>
        @for (x of Object.keys(skladniki_dodane); track x) {
          <tr>
            <td tuiTd><img src="{{slownik[x]}}" class="obrazek_listy"></td>
            <td tuiTd><span>{{x}}</span></td>
            <td tuiTd>
              <div class="kontrolki_ilosci">
                <button tuiButton size="s" appearance="secondary" (click)="zmiana_ilosci(x, skladniki_dodane[x] - 1)">-</button>
                <span class="ilosc_tekst">{{skladniki_dodane[x]}}</span>
                <button tuiButton size="s" appearance="secondary" (click)="zmiana_ilosci(x, skladniki_dodane[x] + 1)">+</button>
              </div>
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>
